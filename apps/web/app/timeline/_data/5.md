---
id: 5
title: "Docker Build Optimization"
description: "Reduced Docker image from 526MB to 346MB (34% reduction) with 99% layer efficiency"
category: INFRASTRUCTURE
article: "/blog/4"
playground: null
created_at: 2025-07-10 09:00:00.000 +0900
updated_at: 2025-07-10 09:00:00.000 +0900
tags: [CI/CD,DevOps,Docker,optimization]
---

### Initial Problems

- Image size: 526MB
- Poor layer caching
- Yarn Berry PnP compatibility issues
- Long build times

### Optimization Strategy

1. Multi-stage build (base → deps → builder → runner)
2. Cache mount for dependencies
3. Proper .dockerignore configuration
4. Fresh base strategy vs copying node_modules

### Results

- Final image: 346MB (34% reduction)
- Layer efficiency: 99%
- Improved build cache hit rate

### Key Decisions

- Used Alpine Linux base
- Separated dependency installation from build
- Production-only dependencies in final image
- Leveraged BuildKit features
